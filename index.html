<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>ATTESTATION DE DÉPLACEMENT DÉROGATOIRE</title>
    <meta charset="utf-8" />
    <meta
      name="description"
      content="En application de l’article 1er du décret du 16 mars 2020 portant réglementation des déplacements dans le cadre de la lutte contre la propagation du virus Covid-19"
    />
    <meta itemprop="name" content="ATTESTATION DE DÉPLACEMENT DÉROGATOIRE" />
    <meta
      itemprop="description"
      content="En application de l’article 1er du décret du 16 mars 2020 portant réglementation des déplacements dans le cadre de la lutte contre la propagation du virus Covid-19"
    />
    <meta name="og:title" content="ATTESTATION DE DÉPLACEMENT DÉROGATOIRE" />
    <meta
      name="og:description"
      content="En application de l’article 1er du décret du 16 mars 2020 portant réglementation des déplacements dans le cadre de la lutte contre la propagation du virus Covid-19"
    />
    <meta name="og:url" content="https://magopian.github.io/att" />
    <meta name="og:site_name" content="ATTESTATION DE DÉPLACEMENT DÉROGATOIRE"/>
    <meta name="og:locale" content="fr_FR" />
    <meta name="og:type" content="website" />

    <link rel="stylesheet" href="style.css">
  </head>

  <body>

    <main>

      <header>
        <h1>ATTESTATION DE DÉPLACEMENT DÉROGATOIRE</h1>
        <p>
          En application de l’article 1<sup>er</sup> du décret du 16 mars 2020 portant
          réglementation des<br/> déplacements dans le cadre de la lutte contre la
          propagation du virus Covid-19 :
        </p>
      </header>

      <form id="declaration-form">

        <div>
          <p>Je soussigné(e)</p>

          <div class="form-line">
            <label for="nom">Mme / M.</label>
            <input type="text" name="nom" id="nom"/>
          </div>

          <div class="form-line">
            <label for="date-naissance">Né(e) le :</label>
            <input type="text" name="date-naissance" id="date-naissance"/>
          </div>

          <div class="form-line">
            <label for="adresse">Demeurant :</label>
            <textarea name="adresse" id="adresse" rows="3"></textarea>
          </div>
        </div>

        <p>
          certifie que mon déplacement est lié au motif suivant (cocher la case)
          autorisé par l’article 1er du décret du 16 mars 2020 portant
          réglementation des déplacements dans le cadre de la lutte contre la
          propagation du virus Covid-19 :
        </p>

        <div class="reason">
          <div>
            <input type="checkbox" name="domicile" id="domicile">
          </div>
          <label for="domicile">
            déplacements entre le domicile et le lieu d’exercice de l’activité professionnelle, lorsqu’ils sont
            indispensables à l’exercice d’activités ne pouvant être organisées sous forme de télétravail (sur
            justificatif permanent) ou déplacements professionnels ne pouvant être différés ;
          </label>
        </div>


        <div class="reason">
          <div>
            <input type="checkbox" name="reason" id="essential">
          </div>
          <label for="essential">
            déplacements pour effectuer des achats de première nécessité dans des établissements autorisés (liste sur
            gouvernement.fr) ;
          </label>
        </div>

        <div class="reason">
          <div>
            <input type="checkbox" name="reason" id="sante">
          </div>
          <label for="sante">
            déplacements pour motif de santé ;
          </label>
        </div>

        <div class="reason">
          <div>
            <input type="checkbox" name="reason" id="famille">
          </div>
          <label for="famille">
            déplacements pour motif familial impérieux, pour l’assistance aux personnes vulnérables ou la garde d’enfants;
          </label>
        </div>

        <div class="reason">
          <div>
            <input type="checkbox" name="reason" id="sport">
          </div>
          <label for="sport">
            déplacements brefs, à proximité du domicile, liés à l’activité physique individuelle
            des personnes, à l’exclusion de toute pratique sportive collective, et aux besoins
            des animaux de compagnie.
          </label>
        </div>

        <div class="form-footer">
          <p>
            <label for="localisation">Fait à</label> <input type="text" name="localisation" id="localisation" />,
            <label for="date">le</label> <input type="date" name="date" id="date" />
          </p>

          <p>
            <label for="signature">Signature :</label>
            <input type="file" name="signature" id="signature" accept="image/*" />
          </p>

        </div>

      </form>

    </main>

    <footer>
      <p>
        Ce document est une copie de celui disponible sur
        <a
          href="https://www.interieur.gouv.fr/Actualites/L-actu-du-Ministere/Attestation-de-deplacement-derogatoire"
          title="Attestation de déplacement dérogatoire"
        >
          le site du ministère de l'intérieur</a
        >.
      </p>
      <p>
        D'après
        <a
          href="https://www.numerama.com/politique/611777-attestation-de-deplacement-que-faire-sans-imprimante-ni-papier.html#611777-Dclaration-sur-smartphone"
          title="Article sur le site de Numérama"
          >Numérama</a
        >
        il est possible de montrer une version numérique (cette page remplie) en
        lieu et place d'une version papier.
      </p>
      <p>
        Le code source est disponible sur
        <a
          href="https://github.com/magopian/att"
          title="Repository 'att' de magopian"
          >https://github.com/magopian/att</a
        >
      </p>
    </footer>

    <script>
      // SAVE/RESTORE THE FORM TO/FROM LOCALSTORAGE
      let serializedForm = {};
      // Restore form from localstorage if previous data was stored
      const fromStorage = localStorage.getItem(window.location.href);
      if (fromStorage) {
        serializedForm = JSON.parse(fromStorage);
        Object.keys(serializedForm).map(function(formElementName) {
          const elements = document.getElementsByName(formElementName);
          if (elements.length) {
            const element = elements[0];
            if (element.type === "checkbox") {
              element.checked = serializedForm[formElementName];
            } else {
              element.value = serializedForm[formElementName];
            }
          }
        });
      }

      // Save the form to localstorage on change
      function saveToLocalStorage() {
        const json = JSON.stringify(serializedForm);
        localStorage.setItem(window.location.href, json);
      }

      const form = document.getElementById("declaration-form");
      // Keep compatibility with IE.
      const formElements = Array.prototype.slice.call(form.elements);
      formElements.map(function(element) {
        if (element.type === "checkbox") {
          element.onchange = function(event) {
            serializedForm[event.target.name] = event.target.checked;
            saveToLocalStorage();
          };
        } else {
          element.oninput = function(event) {
            serializedForm[event.target.name] = event.target.value;
            saveToLocalStorage();
          };
        }
      });
    </script>
  </body>
</html>
